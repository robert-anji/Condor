<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>View.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>View.h</h1><div class="fragment"><pre>00001 <span class="comment">// $RCSfile: View.h,v $</span>
00002 <span class="comment">// $Revision: 1.2 $</span>
00003 <span class="comment">// 1. Prefixed record functions with 'Tran'.</span>
00004 <span class="comment">// 2. Removed ValueSeparatorGet().</span>
00005 <span class="comment">// 3. Made RecordSearchXXX() functions return the record pointer.</span>
00006 
00007 <span class="preprocessor">#ifndef ViewClass</span>
00008 <span class="preprocessor"></span><span class="preprocessor">#define ViewClass</span>
00009 <span class="preprocessor"></span>
00010 <span class="preprocessor">#include &lt;assert.h&gt;</span>
00011 
00012 <span class="preprocessor">#include "Global.h"</span>
00013 <span class="preprocessor">#include "Database.h"</span>
00014 <span class="preprocessor">#include "DefinesAndEnum.h"</span>
00015 <span class="preprocessor">#include "Scheduler.h"</span>
00016 <span class="preprocessor">#include "List.h"</span>
00017 
00018 <span class="keyword">class </span>Attribute;
00019 <span class="keyword">class </span>Aggregate;
00020 <span class="keyword">class </span>Process;
00021 <span class="keyword">class </span>Query;
00022 <span class="keyword">class </span>Record;
00023 <span class="keyword">class </span>Table;
00024 <span class="keyword">class </span>Trigger;
00025 <span class="keyword">class </span>Value;
00026 <span class="keyword">class </span>ViewIterator;
00027 
00028 <span class="comment">//\class View</span>
00031 <span class="comment"></span>
00032 <span class="comment">//\note {</span>
00033 <span class="comment">// This is one of the most import classes to use the database</span>
00034 <span class="comment">// For VerifyRight!</span>
00035 <span class="comment">//}</span>
00036 
<a name="l00037"></a><a class="code" href="classView.html">00037</a> <span class="keyword">class </span><a class="code" href="classView.html">View</a>
00038 {
00039 <span class="keyword">public</span>:
00040   <span class="keyword">friend</span> <span class="keyword">class </span>Database;
00041   <span class="keyword">friend</span> <span class="keyword">class </span>Table;
00042 
00044 
00046 
00056   <span class="keywordtype">bool</span>     <a class="code" href="classView.html#a0">ViewRecordUnselect</a>     (Record *rec);
00057   <span class="keywordtype">unsigned</span> <a class="code" href="classView.html#a1">TableRecordsSelect</a>     (<span class="keywordtype">unsigned</span> start, <span class="keywordtype">unsigned</span> end);
00058   <span class="keywordtype">unsigned</span> <a class="code" href="classView.html#a1">TableRecordsSelect</a>     (Query* q);
00059   <span class="comment">// \</span>
00060   <span class="keywordtype">unsigned</span> <a class="code" href="classView.html#a1">TableRecordsSelect</a>     (Regex* r); <span class="comment">// TBD: upcoming feature</span>
00061   <span class="comment">//</span>
00062   <span class="keywordtype">bool</span>     TableRecordsImportSelected();
00063   <span class="keywordtype">bool</span>     TableRecordsImportFromTrigger(Trigger *trigger);
00064   <span class="comment">//</span>
00065   Record*  RecordNew           ();
00066   <span class="comment">// The functions below are overloaded to accept an optional iterator.</span>
00067   Record*  RecordCurrentGet    (            ViewIterator* iter=0);
00068   Record*  RecordSearchFirst   (Query* q=0, ViewIterator* iter=0);
00069 
00070   <span class="comment">// Trigger API:</span>
00072 <span class="comment"></span>  <span class="comment">// Trigger for records.</span>
00073   Trigger* TriggerNew(eTriggerType type, <span class="keywordtype">void</span> *trg_owner_obj, Query *q=0, Record *rec=0);
00074   <span class="comment">// Trigger for aggregates.</span>
00075   Trigger* TriggerNew(eTriggerType type, <span class="keywordtype">void</span> *trg_owner_obj, Aggregate *aggr, Query *q);
00076   <span class="comment">// Trigger activate action: invoke callback TriggerActionFnPtr or block 'process'.</span>
00077   <span class="keywordtype">bool</span> TriggerActivate(Trigger* trg, TriggerActionFnPtr fn);
00078   <span class="keywordtype">bool</span> TriggerActivate(Trigger* trg, Process* process);
00079   <span class="comment">// Trigger management.</span>
00080   <span class="keywordtype">bool</span>     TriggerSuspend   (Trigger *trg);
00081   <span class="keywordtype">bool</span>     TriggerActivate  (Trigger *trg);
00082   <span class="keywordtype">bool</span>     TriggerDelete    (Trigger *trg);
00083   <span class="keywordtype">bool</span>     TriggerMatched   (Trigger *trg);
00084 
00085   List&lt;Record&gt;*          mpRecordPtrList;   <span class="comment">// all records selected by view</span>
00086 
00087 <span class="keyword">private</span>:
00088   <span class="keyword">const</span> <span class="keywordtype">char</span>*            mpName;
00089   Table*                 mpTable;  <span class="comment">// the table from which the view was made</span>
00090   eRecordPermissionBits  mRecPermission;
00091 <span class="comment">//List&lt;Record&gt;*          mpRecordPtrList;   // all records selected by view</span>
00092   List&lt;Aggregate&gt;        mAggregatePtrList; <span class="comment">// all aggregates added to view</span>
00093   List&lt;Record&gt;           mRecordNewPtrList; <span class="comment">// all new records, not added yet to table</span>
00094   List&lt;ViewIterator&gt;     mViewIteratorList;
00095 
00096   <span class="comment">// Private member functions:</span>
00097   <a class="code" href="classView.html">View</a>  (<span class="keyword">const</span> <span class="keywordtype">char</span>* view_name, Table* table, eRecordPermissionBits perm);
00098   ~<a class="code" href="classView.html">View</a> ();
00099 };
00100 
00101 <span class="preprocessor">#endif</span>
00102 <span class="preprocessor"></span>
00103 <span class="comment">// End</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 9 12:39:08 2009 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
